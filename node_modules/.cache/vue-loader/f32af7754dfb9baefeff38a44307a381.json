{"remainingRequest":"D:\\project\\daily\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\project\\daily\\src\\components\\User\\newTable.vue?vue&type=style&index=0&id=4074fad2&scoped=true&lang=css&","dependencies":[{"path":"D:\\project\\daily\\src\\components\\User\\newTable.vue","mtime":1592480877004},{"path":"D:\\project\\daily\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\project\\daily\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\project\\daily\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\project\\daily\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\project\\daily\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKDQouYnRucyB7DQogIG1hcmdpbjogMTBweCA5MHB4Ow0KfQ0KLnRhYiB7DQogIHdpZHRoOiA4MDBweDsNCiAgbWFyZ2luOiAwIGF1dG87DQp9DQo="},{"version":3,"sources":["newTable.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoMA;AACA;AACA;AACA;AACA;AACA;AACA","file":"newTable.vue","sourceRoot":"src/components/User","sourcesContent":["<template>\r\n  <div>\r\n    <!-- 新建的弹窗-->\r\n    <Button type=\"primary\" @click=\"createBtn\" class=\"btns\">新建</Button>\r\n    <Modal\r\n      v-model=\"createModal\"\r\n      title=\"新建\"\r\n      @on-ok=\"createOk\"\r\n      @on-cancel=\"cancel\"\r\n    >\r\n      <!-- 新建输入框 -->\r\n      <Input\r\n        v-model=\"content\"\r\n        type=\"textarea\"\r\n        :rows=\"4\"\r\n        placeholder=\"输入你想记录的事...\"\r\n      />\r\n    </Modal>\r\n\r\n    <!-- 修改的弹窗 -->\r\n    <Button @click=\"modifyBtn\" type=\"primary\" class=\"btns\">修改</Button>\r\n    <Modal\r\n      title=\"修改\"\r\n      v-model=\"modifyModal\"\r\n      :mask-closable=\"false\"\r\n      @on-ok=\"modifyOk\"\r\n    >\r\n      <!-- 修改输入框 -->\r\n      <Input v-model=\"nowContent\" :rows=\"4\" type=\"textarea\" />\r\n    </Modal>\r\n\r\n    <!-- 删除按钮 -->\r\n    <Button @click=\"deleteConfirm\" type=\"primary\" class=\"btns\">删除</Button>\r\n\r\n    <!-- 表格区域 -->\r\n    <Table\r\n      border\r\n      stripe\r\n      ref=\"selection\"\r\n      :columns=\"columns4\"\r\n      :data=\"allList\"\r\n      onselect\r\n      @on-select=\"getRow\"\r\n      @on-select-cancel=\"cancelSelect\"\r\n      @on-row-click=\"checkContent\"\r\n      @on-select-all=\"selectAll\"\r\n      class=\"tab\"\r\n    ></Table>\r\n\r\n    <!-- 查看的弹窗 -->\r\n\r\n    <Modal v-model=\"checkModal\" title=\"查看\" @on-ok=\"ok\" @on-cancel=\"cancel\">\r\n      <Input v-model=\"nowContent\" :rows=\"4\" type=\"textarea\" />\r\n    </Modal>\r\n  </div>\r\n</template>\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      selectedItems: \"\",\r\n      checkModal: false,\r\n      nowContent: \"\",\r\n      createModal: false,\r\n      content: \"\",\r\n      modifyModal: false,\r\n      columns4: [\r\n        {\r\n          type: \"selection\",\r\n          width: 60,\r\n          align: \"center\",\r\n        },\r\n        {\r\n          title: \"事件\",\r\n          key: \"content\",\r\n        },\r\n        {\r\n          title: \"时间\",\r\n          key: \"time\",\r\n        },\r\n      ],\r\n      allList: [],\r\n    };\r\n  },\r\n  methods: {\r\n    createOk() {\r\n      // 把新项添加到allList里\r\n      const list = {\r\n        id: Date.now().toString(36),\r\n        content: this.content,\r\n        time: new Date().toLocaleString(),\r\n      };\r\n      this.allList = [...this.allList, list];\r\n      this.content = \"\";\r\n      this.saveContent();\r\n    },\r\n    createBtn() {\r\n      this.createModal = true;\r\n    },\r\n    ok() {\r\n      this.$Message.info(\"Clicked ok\");\r\n    },\r\n\r\n    cancel() {\r\n      this.$Message.info(\"Clicked cancel\");\r\n    },\r\n    getRow(selection, row) {\r\n      this.nowId = row.id;\r\n      this.nowContent = row.content;\r\n      this.content = \"\";\r\n\r\n      this.saveContent();\r\n      this.selectedItems = selection;\r\n    },\r\n    cancelSelect(selection) {\r\n      this.selectedItems = selection;\r\n    },\r\n    selectAll(selection) {\r\n      this.selectedItems = selection;\r\n    },\r\n    findContent(con) {\r\n      return con.id === this.nowId;\r\n    },\r\n\r\n    modifyOk() {\r\n      this.old = this.allList.find(this.findContent);\r\n      console.log(this.old);\r\n      this.old.content = this.nowContent;\r\n      this.old.time = new Date().toLocaleString();\r\n\r\n      this.nowContent = null;\r\n      this.nowId = null;\r\n      //this.content = \"\";\r\n      this.nowContent = \"\";\r\n\r\n      this.saveContent();\r\n    },\r\n\r\n    deleteConfirm() {\r\n      //debugger;\r\n      if (this.selectedItems.length == 0) {\r\n        this.modifyModal = false;\r\n        alert(\"请勾选想要删除的事件！\");\r\n      } else {\r\n        this.$Modal.confirm({\r\n          title: \"确认删除选中内容吗？\",\r\n          onOk: () => {\r\n            this.$Message.info(\"已删除\");\r\n            let selectedIds = this.selectedItems.map((item) => item.id);\r\n            this.allList = this.allList.filter(\r\n              (item) => !selectedIds.includes(item.id)\r\n            );\r\n\r\n            this.saveContent();\r\n          },\r\n          onCancel: () => {\r\n            this.$Message.info(\"取消操作\");\r\n          },\r\n        });\r\n      }\r\n    },\r\n    saveContent() {\r\n      const parsed = JSON.stringify(this.allList);\r\n      localStorage.setItem(\"allList\", parsed);\r\n    },\r\n\r\n    checkContent(content1) {\r\n      this.checkModal = true;\r\n      this.nowContent = content1.content;\r\n    },\r\n    modifyBtn() {\r\n      console.log(this.selectedItems);\r\n      this.nowIndex = this.allList.findIndex(this.findContent);\r\n      if (this.selectedItems.length == 0) {\r\n        this.modifyModal = false;\r\n        alert(\"请勾选想要修改的记录！\");\r\n      } else if (this.selectedItems.length > 1) {\r\n        this.modifyModal = false;\r\n        alert(\"一次只能修改一条记录！\");\r\n      } else {\r\n        this.modifyModal = true;\r\n      }\r\n    },\r\n  },\r\n  mounted() {\r\n    if (localStorage.getItem(\"allList\")) {\r\n      try {\r\n        this.allList = JSON.parse(localStorage.getItem(\"allList\"));\r\n      } catch (e) {\r\n        localStorage.removeItem(\"allList\");\r\n      }\r\n    }\r\n  },\r\n};\r\n</script>\r\n<style scoped>\r\n.btns {\r\n  margin: 10px 90px;\r\n}\r\n.tab {\r\n  width: 800px;\r\n  margin: 0 auto;\r\n}\r\n</style>\r\n"]}]}